(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{166:function(t,s,n){t.exports=n.p+"assets/img/jsjy12.d244fd08.jpg"},308:function(t,s,n){t.exports=n.p+"assets/img/jsjy5.3eaf0dca.png"},361:function(t,s,n){"use strict";n.r(s);var a=n(28),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"案例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#案例"}},[t._v("#")]),t._v(" 案例")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#案例"}},[t._v("案例")]),a("ul",[a("li",[a("a",{attrs:{href:"#单样本检验"}},[t._v("单样本检验")])]),a("li",[a("a",{attrs:{href:"#置信区间"}},[t._v("置信区间")])]),a("li",[a("a",{attrs:{href:"#效应量"}},[t._v("效应量")])]),a("li",[a("a",{attrs:{href:"#标准误差的计算"}},[t._v("标准误差的计算")]),a("ul",[a("li",[a("a",{attrs:{href:"#手动计算"}},[t._v("手动计算")])]),a("li",[a("a",{attrs:{href:"#scipy计算"}},[t._v("scipy计算")])])])]),a("li",[a("a",{attrs:{href:"#数据分析报告怎么写"}},[t._v("数据分析报告怎么写")])]),a("li",[a("a",{attrs:{href:"#单样本t检验-效应量的计算"}},[t._v("单样本T检验 效应量的计算")])]),a("li",[a("a",{attrs:{href:"#code"}},[t._v("code")])])])])])]),a("p"),t._v(" "),a("h2",{attrs:{id:"单样本检验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单样本检验"}},[t._v("#")]),t._v(" 单样本检验")]),t._v(" "),a("p",[t._v("“超级引擎”是一家专门生产汽车引擎的公司，根据政府发布的新排放要求，引擎排放平均值要低于20ppm")]),t._v(" "),a("p",[t._v("公司制造出10台引擎供测试使用，每一台的排放水平如下：")]),t._v(" "),a("p",[t._v("15.6 16.2 22.5 20.5 16.4 19.4 16.6 17.9 12.7 13.9")]),t._v(" "),a("p",[t._v("怎么知道，公司生产的引擎是否符合政府规定呢？")]),t._v(" "),a("h2",{attrs:{id:"置信区间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#置信区间"}},[t._v("#")]),t._v(" 置信区间")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("得到了t值，如何确定置信区间呢？")]),t._v(" "),a("p",[t._v("1）置信水平对应的t值（t_ci）\n查t表格可以得到，95%的置信水平，自由度是n-1对应的t值")]),t._v(" "),a("p",[t._v("2）计算上下限")]),t._v(" "),a("p",[t._v("置信区间上限a = 样本平均值 - t_ci ×标准误差")]),t._v(" "),a("p",[t._v("置信区间下限b = 样本平均值 - t_ci ×标准误差")]),t._v(" "),a("p",[t._v("查找t表格获取95%的置信水平，自由度是n-1对应的t值\n注意：课程中这里对应的下面t_ci值有误，以下面的值为准")])]),t._v(" "),a("p",[a("img",{attrs:{src:n(308),alt:""}})]),t._v(" "),a("p",[a("strong",[t._v("注意：计算置信区间公式中的t值要和前面假设中的t值区别开，这快容易混淆")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("【备注说明】前面第2步和第5步里面两个t值是不一样的")]),t._v(" "),a("p",[t._v("1）在第2步，证据是什么")]),t._v(" "),a("p",[t._v("计算p值里的t值，不是从t表格查出来的，是用公式计算出来的t=（样本平均值-总体平均值）/标准误差，然后用这个计算出的t值再去t表格里去查找出p值")]),t._v(" "),a("p",[t._v("2）在第5步，置信区间")]),t._v(" "),a("p",[t._v("t_ci是置信水平的t值，是根据置信水平95%从t表格里查找到的t值 。为了和前面的t值区别，所以加了后缀t_ci")])]),t._v(" "),a("h2",{attrs:{id:"效应量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#效应量"}},[t._v("#")]),t._v(" 效应量")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("为什么要给出效应量？")]),t._v(" "),a("p",[t._v("在判断某个调查研究的结果，是否有意义或者重要时，要考虑的另一项指标是效应量。效应量太小，意味着处理即使达到了显著水平，也缺乏实用价值。")]),t._v(" "),a("p",[t._v("所以，在假设检验中，我们给出了是否具有统计显著性，也要给出效应量，一起来判断研究结果是否有意义。")]),t._v(" "),a("p",[t._v("效应量报告格式：d=x.xx ，R2=.xx")]),t._v(" "),a("p",[t._v("-1.0：完全负相关")]),t._v(" "),a("p",[t._v("-0.7：强负相关")]),t._v(" "),a("p",[t._v("-0.5：中等负相关")]),t._v(" "),a("p",[t._v("-0.3：弱负相关")]),t._v(" "),a("p",[t._v("0.0：不相关")]),t._v(" "),a("p",[t._v("0.3：弱正相关")]),t._v(" "),a("p",[t._v("0.5：中等正相关")]),t._v(" "),a("p",[t._v("0.7：强正相关")]),t._v(" "),a("p",[t._v("1.0：完全正相关")])]),t._v(" "),a("h2",{attrs:{id:"标准误差的计算"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#标准误差的计算"}},[t._v("#")]),t._v(" 标准误差的计算")]),t._v(" "),a("p",[a("em",[t._v("单样本T检验的标准误差计算")])]),t._v(" "),a("h3",{attrs:{id:"手动计算"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#手动计算"}},[t._v("#")]),t._v(" 手动计算")]),t._v(" "),a("p",[t._v("样本大小 n = 10")]),t._v(" "),a("p",[a("strong",[t._v("标准误差=样本标准差/(n的开方)")])]),t._v(" "),a("p",[a("strong",[t._v("se =sample_std / (np.sqrt(n))")])]),t._v(" "),a("h3",{attrs:{id:"scipy计算"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scipy计算"}},[t._v("#")]),t._v(" scipy计算")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#使用scipy计算标准误差")]),t._v("\nse"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("stats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dataSer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"数据分析报告怎么写"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据分析报告怎么写"}},[t._v("#")]),t._v(" 数据分析报告怎么写")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("怎么写数据分析报告")]),t._v(" "),a("p",[t._v("1、描述统计分析")]),t._v(" "),a("p",[t._v("样本平均值17.17ppm，样本标准差2.98ppm")]),t._v(" "),a("p",[t._v("2、推论统计分析")]),t._v(" "),a("p",[t._v("1）假设检验")]),t._v(" "),a("p",[t._v("独立样本t(9)=-3.00,p=.0074(α=5%)，单尾检验（左尾）")]),t._v(" "),a("p",[t._v("公司引擎排放满足标准")]),t._v(" "),a("p",[t._v("2）置信区间")]),t._v(" "),a("p",[t._v("平均值的置信区间，95% CI=(17.11,17.23)")]),t._v(" "),a("p",[t._v("3）效应量")]),t._v(" "),a("p",[t._v("d=-0.94")])]),t._v(" "),a("h2",{attrs:{id:"单样本t检验-效应量的计算"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单样本t检验-效应量的计算"}},[t._v("#")]),t._v(" 单样本T检验 效应量的计算")]),t._v(" "),a("p",[t._v("同相关检验的效应量计算相同")]),t._v(" "),a("p",[a("strong",[t._v("Cohen's d = （样本平均值1-样本平均值2) / 标准差")]),t._v("\n样本平均值2:这里是与题目有关的，这里是20，政府规定排放标准20")]),t._v(" "),a("p",[a("img",{attrs:{src:n(166),alt:""}})]),t._v(" "),a("h2",{attrs:{id:"code"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#code"}},[t._v("#")]),t._v(" code")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#导入包")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" pandas "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" pd\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" numpy "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" np\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" matplotlib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pyplot "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" plt\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#样本数据集")]),t._v("\ndataSer"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("pd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Series"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15.6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16.2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16.4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19.4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16.6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17.9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12.7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13.9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#样本平均值")]),t._v("\nsample_mean"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("dataSer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v("'''\n这里要区别：数据集的标准差，和样本标准差\n数据集的标准差公式除以的是n，样本标准差公式除以的是n-1。\n样本标准差，用途是用样本标准差估计出总体标准差\npandas计算的标准差，默认除以的是n-1，也就是计算出的是样本标准差\npandas标准差官网地址：https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.std.html\n'''")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#样本标准差")]),t._v("\nsample_std"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("dataSer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("std"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'样本平均值='")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("sample_mean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'单位：ppm'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'样本标准差='")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("sample_std"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'单位：ppm'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 样本平均值= 17.169999999999998 单位：ppm")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 样本标准差= 2.9814426038413018 单位：ppm")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 推论统计分析报告中包括：假设检验，置信区间，效应量")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1. 问题是什么？")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 零假设和备选假设")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 要研究的问题是：这些样本数据是否满足新标准呢？")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据这个问题我提出来下面两个互为相反的假设。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 零假设H0：公司引擎排放不满足标准，也就是平均值u>=20。这里的20是政府规定新标准的最低可能值。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 零假设总是表述为研究没有改变，没有效果，不起作用等，这里就是不满足标准。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 备选假设H1：公司引擎排放满足标准，也就是平均值u<20")]),t._v("\n\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 检验类型")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 检验类型有很多种，因为这里只有1个样本，所以选择单样本检验。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 检验类型参考资料：http://support.minitab.com/zh-cn/minitab/17/topic-library/basic-statistics-and-graphs/hypothesis-tests/tests-of-means/types-of-t-tests/")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 抽样分布类型")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 我们还要判断抽样分布是哪种？因为抽样分布的类型，决定了后面计算p值的不同。")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在我们这个汽车引擎案例中，样本大小是10（小于30），属于小样本。那小样本的抽样分布是否满足t分布呢？")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 因为t分布还要求数据集近似正态分布，所以下面图片我们看下样本数据集的分布长什么样。")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v("'''\n直方图能够粗略估计数据密度，如果想给数据一个更精确的拟合曲线（专业术语叫：核密度估计kernel density estimate (KDE)），\nSeaborn 可以很方便的画出直方图和拟合曲线。\n查看数据集分布官网教程地址：https://seaborn.pydata.org/tutorial/distributions.html\n'''")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v("'''\n需要先在navigator中安装绘图包seaborn，\n\n如果还不知道如何安装包，可以看第1关的教程：https://www.zhihu.com/question/58033789/answer/254673663\n\n'''")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" seaborn "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" sns\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看数据集分布")]),t._v("\nsns"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("distplot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dataSer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#bins=20")]),t._v("\nplt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据集分布'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nplt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("show"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 通过观察上面数据集分布图，数据集近似正态分布，满足t分布的使用条件，所以抽样分布是t分布，自由度df=n-1=10-1=9。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 检验方向")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 单尾检验（左尾，右尾），还是双尾检验？")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 因为备选假设是公司引擎排放满足标准，也就是平均值u<20")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 所以我们使用单尾检验中的左尾检验")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 总结")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 综合以上分析，本次假设检验是单样本t检验，单尾检验中的左尾。")]),t._v("\n\n\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2.证据是什么？")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在零假设成立前提下，得到样本平均值的概率p是多少？")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 计算p值步骤也很简单：")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1）计算出标准误差")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 标准误差=样本标准差除以样本大小n的开方。这里的样本标准差是用来估计总体标准差的")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2）计算t值")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# t=（样本平均值-总体平均值）/标准误差")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 3）根据t值，自由度的计算出概率p值")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# '''")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 方法一：手动计算，熟悉过程")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1）计算标准误差")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 标准误差=样本标准差/(n的开方)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# '''")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# #样本大小")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# n = 10")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# #标准误差=样本标准差/(n的开方)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# se =sample_std / (np.sqrt(n))")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# '''")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2）手动计算t值")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# t=（样本平均值-总体平均值）/标准误差")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# '''")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# #总体平均值：就是政府发布的标准20")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# pop_mean=20")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# #t值")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# t=(sample_mean-pop_mean) / se")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# #计算出t值=-3")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# print('标准误差se=',se)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# print('t=',t)")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# '''")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2)也可以查t表得到对应的t值")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 3）计算自由度df=n-1,t值对应的概率：p=0.0149")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 计算p值的工具：https://www.graphpad.com/quickcalcs/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# '''")]),t._v("\n\n\n\n"),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v("'''\n方法二：用python统计包scipy自动计算\n用scipy计算出的是：双尾检验\n单（1samp）样本t检验（ttest_1samp）：https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.ttest_1samp.html\n相关（related）样本t检验（ttest_rel）：https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.ttest_rel.html\n双独立（independent）样本t检验（ttest_ind）：https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.ttest_ind.html\n'''")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#导入统计模块（stats）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" scipy "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" stats\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#总体平均值")]),t._v("\npop_mean"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v("'''\nttest_1samp：单独样本t检验\n返回的第1个值t是假设检验计算出的（t值），\n第2个值p是双尾检验的p值\n'''")]),t._v("\nt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("p_two "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("stats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ttest_1samp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dataSer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("pop_mean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'t值='")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'双尾检验的p值='")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("p_two"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v("'''\n因为scipy计算出的是双尾检验的t值和p值，但是我们这里是左尾检验。\n根据对称性，双尾的p值是对应单尾p值的2倍\n'''")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#单尾检验的p值")]),t._v("\np_one"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("p_two"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'单尾检验的p值='")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("p_one"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 判断标准是什么？")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#判断标准（显著水平）使用alpha=5%")]),t._v("\nalpha"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.05")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v("'''\n左尾判断条件：t < 0 and  p_one < 判断标准（显著水平）alpha\n右尾判断条件：t > 0 and  p_one < 判断标准（显著水平）alpha\n'''")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#做出结论")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("and")]),t._v(" p_one"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" alpha"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#左尾判断条件")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'拒绝零假设，有统计显著，也就是汽车引擎排放满足标准'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'接受零假设，没有统计显著，也就是汽车引擎排放不满足标准'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 拒绝零假设，有统计显著，也就是汽车引擎排放满足标准")]),t._v("\n\n\n\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 对很多科学来说，我们使用APA格式来报告假设检验的结果。APA表示的美国心理学会，APA格式是美国心理学会给出了如何撰写研究论文的完整指南，其中一部分告诉我们如何写出推论统计学结果。")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 图中给出了写出t检验结果的一般规则:t(df)=x.xx,p=.xx,检验方向")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 我们按图中标出的序号，看下在报告假设检验时，需要告诉读者以下几点信息： 1）检验类型 包括检验类型，抽样分布，检验方向 首先执行的是哪种类型的检验？在此示例中是单样本t检验，接着在括号中写出自由度，写上等号，然后给出t值，保留两位小数。写上逗号，然后给出p值，同样保留两位小数，然后输出逗号，并指明检验方向。是单尾检验还是双尾检验。 2）精确的p值 然后给出p值，同样保留两位小数，然后输出逗号， 3）给出检验方向，例如是单尾检验还是双尾检验。 4）显著性水平 始终让读者知道你在做出决策时使用的显著性水平。")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 独立样本t(9)=-3.00 , p=.0074 (α=5%),单尾检验（左尾）")]),t._v("\n\n\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 5.置信区间")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 图片里是APA格式的置信区间：平均值的置信区间，95% CI=(a,b)")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在报告告置信区间时，提供了这样几个信息：")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1）开头会说是哪种类型的置信区间")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 例如在单样本检验中是单个平均值的置信区间，但是在我们后面要讲到的相关样本检验是两个平均值之间差异的置信区间。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在这个案例里，我们是单个平均值的置信区间")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2）置信水平和区间的上下限。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 置信水平（简写为CI），括号里写上下限。这里是955的置信水平")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v("'''\n1）置信水平对应的t值（t_ci）\n查t表格可以得到，95%的置信水平，自由度是n-1对应的t值\n2）计算上下限\n置信区间上限a=样本平均值 - t_ci ×标准误差\n置信区间下限b=样本平均值 - t_ci ×标准误差\n'''")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v("'''\n查找t表格获取95%的置信水平，自由度是n-1对应的t值\n注意：课程中这里对应的下面t_ci值有误，以下面的值为准\n'''")]),t._v("\nt_ci"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.262")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#使用scipy计算标准误差")]),t._v("\nse"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("stats"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sem"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dataSer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#置信区间上限")]),t._v("\na"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("sample_mean "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" t_ci "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" se\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#置信区间下限")]),t._v("\nb"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("sample_mean "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" t_ci "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" se\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 【备注说明】前面第2步和第5步里面两个t值是不一样的")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1）在第2步，证据是什么")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 计算p值里的t值，不是从t表格查出来的，是用公式计算出来的t=（样本平均值-总体平均值）/标准误差，然后用这个计算出的t值再去t表格里去查找出p值")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2）在第5步，置信区间")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# t_ci是置信水平的t值，是根据置信水平95%从t表格里查找到的t值 。为了和前面的t值区别，所以加了后缀t_ci")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 6.效应量")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 还需要在报告中给出效应量（effect size）。什么是效应量呢？")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 效应量是指处理效应的大小，例如药物A比药物B效果显著。度量效应量有很多种，但大多数都属于两大主要类别。")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1）第一种叫做差异度量")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 例如在对比平均值时，衡量效应大小的常见标准之一是Cohen's d")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Cohen's d = （样本平均值1-样本平均值2) / 标准差")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Cohen's d 除以的是标准差，也就是以标准差为单位，样本平均值和总体平均值之间相差多少。")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2）第二种叫做相关度度量")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 例如R平方，表示某个变量的变化比例与另一变量的关系。可以用t检验的信息推出R平方的公式，这里的t值从t检验中获得的值，df是自由度。")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# r2=t2 / (t2+df),其中r2是指r的平方，t2是t的平方")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果r平方等于20%，表示我们可以说通过知道另一个变量能够接受相关变量20%的变化情况")]),t._v("\n\n\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 为什么要给出效应量？")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在判断某个调查研究的结果，是否有意义或者重要时，要考虑的另一项指标是效应量。效应量太小，意味着处理即使达到了显著水平，也缺乏实用价值。")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 所以，在假设检验中，我们给出了是否具有统计显著性，也要给出效应量，一起来判断研究结果是否有意义。")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 效应量报告格式：d=x.xx ，R2=.xx")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -1.0：完全负相关")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -0.7：强负相关")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -0.5：中等负相关")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -0.3：弱负相关")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0.0：不相关")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0.3：弱正相关")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0.5：中等正相关")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 0.7：强正相关")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1.0：完全正相关")]),t._v("\n\n\n\n"),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v("'''\n效应量：差异指标Cohen's d\n'''")]),t._v("\nd"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sample_mean "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" pop_mean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" sample_std\n"),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v("'''\n效应量：相关度指标R2\n'''")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#样本大小")]),t._v("\nn"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#自由度")]),t._v("\ndf"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nR2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("df"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'d='")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'R2='")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("R2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);