<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>集中趋势 | 欢迎回来 ！</title>
    <meta name="description" content="lcsx">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/blog/assets/css/0.styles.ee874cfe.css" as="style"><link rel="preload" href="/blog/assets/js/app.09e88087.js" as="script"><link rel="preload" href="/blog/assets/js/2.5d6d69d5.js" as="script"><link rel="preload" href="/blog/assets/js/4.aecd194a.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.9545c010.js"><link rel="prefetch" href="/blog/assets/js/11.c121cceb.js"><link rel="prefetch" href="/blog/assets/js/12.d8c9c1bd.js"><link rel="prefetch" href="/blog/assets/js/13.858fecce.js"><link rel="prefetch" href="/blog/assets/js/14.10c2aaa2.js"><link rel="prefetch" href="/blog/assets/js/15.1a4adff1.js"><link rel="prefetch" href="/blog/assets/js/16.69d675fe.js"><link rel="prefetch" href="/blog/assets/js/17.ea7dd094.js"><link rel="prefetch" href="/blog/assets/js/18.053f4e8c.js"><link rel="prefetch" href="/blog/assets/js/19.f6d1f87f.js"><link rel="prefetch" href="/blog/assets/js/20.ff3ffefa.js"><link rel="prefetch" href="/blog/assets/js/21.6efdf0ff.js"><link rel="prefetch" href="/blog/assets/js/22.324e8463.js"><link rel="prefetch" href="/blog/assets/js/23.2e0c31c4.js"><link rel="prefetch" href="/blog/assets/js/24.5a3dca30.js"><link rel="prefetch" href="/blog/assets/js/25.3b2d9b9f.js"><link rel="prefetch" href="/blog/assets/js/26.c34a5d16.js"><link rel="prefetch" href="/blog/assets/js/27.b6134063.js"><link rel="prefetch" href="/blog/assets/js/28.bf3c2608.js"><link rel="prefetch" href="/blog/assets/js/29.d3af9c62.js"><link rel="prefetch" href="/blog/assets/js/3.39e077d4.js"><link rel="prefetch" href="/blog/assets/js/30.bb079fbc.js"><link rel="prefetch" href="/blog/assets/js/31.e2041594.js"><link rel="prefetch" href="/blog/assets/js/32.5ee57ad4.js"><link rel="prefetch" href="/blog/assets/js/33.79f9ff37.js"><link rel="prefetch" href="/blog/assets/js/34.bd04b9df.js"><link rel="prefetch" href="/blog/assets/js/35.71548143.js"><link rel="prefetch" href="/blog/assets/js/36.0a93475f.js"><link rel="prefetch" href="/blog/assets/js/37.91bdc250.js"><link rel="prefetch" href="/blog/assets/js/38.90858741.js"><link rel="prefetch" href="/blog/assets/js/39.8f381891.js"><link rel="prefetch" href="/blog/assets/js/40.cf59ef77.js"><link rel="prefetch" href="/blog/assets/js/41.b9a6ffe3.js"><link rel="prefetch" href="/blog/assets/js/42.1f224073.js"><link rel="prefetch" href="/blog/assets/js/43.5b480eab.js"><link rel="prefetch" href="/blog/assets/js/44.696ba103.js"><link rel="prefetch" href="/blog/assets/js/45.a7f44d79.js"><link rel="prefetch" href="/blog/assets/js/46.4e85fe28.js"><link rel="prefetch" href="/blog/assets/js/47.8a9aa7da.js"><link rel="prefetch" href="/blog/assets/js/48.04324fe0.js"><link rel="prefetch" href="/blog/assets/js/49.0f839c66.js"><link rel="prefetch" href="/blog/assets/js/5.6106f207.js"><link rel="prefetch" href="/blog/assets/js/50.11bfcbd5.js"><link rel="prefetch" href="/blog/assets/js/51.82d8487d.js"><link rel="prefetch" href="/blog/assets/js/52.e904bad2.js"><link rel="prefetch" href="/blog/assets/js/53.3f00d869.js"><link rel="prefetch" href="/blog/assets/js/54.70d26d6c.js"><link rel="prefetch" href="/blog/assets/js/55.2f933ad0.js"><link rel="prefetch" href="/blog/assets/js/56.85972735.js"><link rel="prefetch" href="/blog/assets/js/57.b214059e.js"><link rel="prefetch" href="/blog/assets/js/58.a51c7fbb.js"><link rel="prefetch" href="/blog/assets/js/59.6ed363ea.js"><link rel="prefetch" href="/blog/assets/js/6.69c66181.js"><link rel="prefetch" href="/blog/assets/js/60.8c8e72a1.js"><link rel="prefetch" href="/blog/assets/js/61.cd10cc0a.js"><link rel="prefetch" href="/blog/assets/js/62.b3bff3dc.js"><link rel="prefetch" href="/blog/assets/js/63.93753e25.js"><link rel="prefetch" href="/blog/assets/js/64.0c3cfd75.js"><link rel="prefetch" href="/blog/assets/js/65.d53b9bb8.js"><link rel="prefetch" href="/blog/assets/js/66.d46b2746.js"><link rel="prefetch" href="/blog/assets/js/67.285c4dd3.js"><link rel="prefetch" href="/blog/assets/js/7.dcdaa74b.js"><link rel="prefetch" href="/blog/assets/js/8.516b6e0b.js"><link rel="prefetch" href="/blog/assets/js/9.1b87dd6a.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.ee874cfe.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="https://vuejs.org/images/logo.png" alt="欢迎回来 ！" class="logo"> <span class="site-name can-hide">欢迎回来 ！</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/git/" class="nav-link">
  git
</a></div><div class="nav-item"><a href="/blog/DMP/" class="nav-link">
  DMP
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/JavaScript/resfulApi/" class="nav-link">
  模拟数据
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/java/tingshu/" class="nav-link">
  小慕听书
</a></li><li class="dropdown-item"><!----> <a href="/blog/java/java_study/env/" class="nav-link">
  Java Study
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><span class="title">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Python/python_study/" class="nav-link">
  python基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/Python/basicKnowledge/" class="nav-link router-link-active">
  一些基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/Python/dataAnalys/" class="nav-link">
  数据分析
</a></li><li class="dropdown-item"><!----> <a href="/blog/Python/zhihu/basis/" class="nav-link">
  网络资料
</a></li><li class="dropdown-item"><!----> <a href="/blog/Python/code/" class="nav-link">
  code
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="MySQL" class="dropdown-title"><span class="title">MySQL</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/mysql/mysql_study/" class="nav-link">
  MySQL基础
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/git/" class="nav-link">
  git
</a></div><div class="nav-item"><a href="/blog/DMP/" class="nav-link">
  DMP
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/JavaScript/resfulApi/" class="nav-link">
  模拟数据
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/java/tingshu/" class="nav-link">
  小慕听书
</a></li><li class="dropdown-item"><!----> <a href="/blog/java/java_study/env/" class="nav-link">
  Java Study
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><span class="title">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/Python/python_study/" class="nav-link">
  python基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/Python/basicKnowledge/" class="nav-link router-link-active">
  一些基础
</a></li><li class="dropdown-item"><!----> <a href="/blog/Python/dataAnalys/" class="nav-link">
  数据分析
</a></li><li class="dropdown-item"><!----> <a href="/blog/Python/zhihu/basis/" class="nav-link">
  网络资料
</a></li><li class="dropdown-item"><!----> <a href="/blog/Python/code/" class="nav-link">
  code
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="MySQL" class="dropdown-title"><span class="title">MySQL</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/mysql/mysql_study/" class="nav-link">
  MySQL基础
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/Python/basicKnowledge/" class="sidebar-link">lcs</a></li><li><a href="/blog/Python/basicKnowledge/base.html" class="sidebar-link">数据分析</a></li><li><a href="/blog/Python/basicKnowledge/centralTendency.html" class="active sidebar-link">集中趋势</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/Python/basicKnowledge/centralTendency.html#数据分类" class="sidebar-link">数据分类</a></li><li class="sidebar-sub-header"><a href="/blog/Python/basicKnowledge/centralTendency.html#单属性分析" class="sidebar-link">单属性分析</a></li></ul></li><li><a href="/blog/Python/basicKnowledge/z.html" class="sidebar-link">z检验</a></li><li><a href="/blog/Python/basicKnowledge/degreeoffreedom.html" class="sidebar-link">自由度 degree of freedom</a></li><li><a href="/blog/Python/basicKnowledge/t.html" class="sidebar-link">t分布</a></li><li><a href="/blog/Python/basicKnowledge/chi_square_test.html" class="sidebar-link">chi-square test  卡方检验</a></li><li><a href="/blog/Python/basicKnowledge/correlation.html" class="sidebar-link">相关系数</a></li><li><a href="/blog/Python/basicKnowledge/ANOVA.html" class="sidebar-link">方差分析</a></li><li><a href="/blog/Python/basicKnowledge/dataVisual.html" class="sidebar-link">可视化</a></li><li><a href="/blog/Python/basicKnowledge/analysisMethods.html" class="sidebar-link">分析方法</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="集中趋势"><a href="#集中趋势" class="header-anchor">#</a> 集中趋势</h1> <p></p><div class="table-of-contents"><ul><li><a href="#集中趋势">集中趋势</a><ul><li><a href="#均值">均值</a></li><li><a href="#中位数">中位数</a></li><li><a href="#众数">众数</a></li><li><a href="#分位数">分位数</a></li></ul><ul><li><a href="#数据分布">数据分布</a><ul><li><a href="#偏态系数与峰态系数">偏态系数与峰态系数</a></li></ul></li><li><a href="#抽样理论">抽样理论</a></li></ul><ul><li><a href="#数据分类">数据分类</a></li><li><a href="#单属性分析">单属性分析</a><ul><li><a href="#异常值分析">异常值分析</a><ul><li><a href="#异常值分析与分布分析code">异常值分析与分布分析code</a></li><li><a href="#四分位相关去异常值">四分位相关去异常值</a></li></ul></li><li><a href="#结构分析">结构分析</a></li><li><a href="#对比分析">对比分析</a><ul><li><a href="#自定义">自定义</a></li><li><a href="#python检验是否为正太分布">python检验是否为正太分布</a></li></ul></li></ul></li></ul></li></ul></div>
数据聚拢在哪<p></p> <h4 id="均值"><a href="#均值" class="header-anchor">#</a> 均值</h4> <p>一般指平均数。
一般用在分布均匀的连续值</p> <h4 id="中位数"><a href="#中位数" class="header-anchor">#</a> 中位数</h4> <p>中位数（Median）又称中值，是按顺序排列的一组数据中居于中间位置的数</p> <p>一般用在 存在异常值，有些特别大，有些特别小的情况，用中位数来衡量ta的集中趋势</p> <h4 id="众数"><a href="#众数" class="header-anchor">#</a> 众数</h4> <p>众数（Mode）是指在统计分布上具有明显集中趋势点的数值，代表数据的一般水平。 也是一组数据中出现次数最多的数值，有时众数在一组数中有好几个。</p> <blockquote><p>1，2，2，3，3，4的众数是2和3。
1，2，3，3，4的众数是3
1，2，3，4，5没有众数。</p></blockquote> <p>一般众数用在离散值的衡量</p> <h4 id="分位数"><a href="#分位数" class="header-anchor">#</a> 分位数</h4> <p>分位数（Quantile），亦称分位点，是指将一个随机变量的概率分布范围分为几个等份的数值点，常用的有中位数（即二分位数）、四分位数、百分位数等。</p> <p>最常用的是四分位,n是个数
q1的位置 = (n+1)*0.25<br>
q2的位置 = (n+1)*0.5<br>
q3的位置 = (n+1)*0.75</p> <hr> <p><img src="/blog/assets/img/pydata1.090db071.png" alt=""> <img src="/blog/assets/img/pydata2.d789b3b3.png" alt=""></p> <h3 id="数据分布"><a href="#数据分布" class="header-anchor">#</a> 数据分布</h3> <p>标准正态分布又称为u分布，是以0为均数、以1为标准差的正态分布，记为N（0，1）。
<img src="/blog/assets/img/pydata7.b418ef05.png" alt=""></p> <h4 id="偏态系数与峰态系数"><a href="#偏态系数与峰态系数" class="header-anchor">#</a> 偏态系数与峰态系数</h4> <p>偏态，数据平均值偏离平均值的程度
<img src="/blog/assets/img/pydata4.9a9808bf.png" alt=""></p> <h5 id="上式值若为正，为正偏，反之为负偏"><a href="#上式值若为正，为正偏，反之为负偏" class="header-anchor">#</a> 上式值若为正，为正偏，反之为负偏</h5> <p><img src="/blog/assets/img/pydata3.545bdae5.jpg" alt=""></p> <p>峰度（peakedness;kurtosis）又称峰态系数。表征概率密度分布曲线在平均值处峰值高低的特征数。直观看来，峰度反映了峰部的尖度。样本的峰度是和正态分布相比较而言统计量，如果峰度大于三，峰的形状比较尖，比正态分布峰要陡峭。反之亦然。</p> <h3 id="抽样理论"><a href="#抽样理论" class="header-anchor">#</a> 抽样理论</h3> <p>分 重复抽样 和 非重复抽样
抽样方式：随机抽样，等差距抽样，分类分别抽样</p> <p><img src="/blog/assets/img/pydata5.021cff1f.png" alt=""> <img src="/blog/assets/img/pydata6.434d91cb.png" alt=""></p> <hr> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd


df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'./data/data/HR.csv'</span><span class="token punctuation">)</span>

<span class="token comment"># res = df.head(10)</span>
<span class="token comment"># print(res)</span>


<span class="token comment"># print(type(df)) </span>
<span class="token comment"># # &lt;class 'pandas.core.frame.DataFrame'&gt;</span>


<span class="token comment"># print(df[&quot;satisfaction_level&quot;])</span>
<span class="token comment"># 0        0.38</span>
<span class="token comment"># 1        0.80</span>
<span class="token comment"># 2        0.11</span>
<span class="token comment"># 3        0.72</span>
<span class="token comment"># 4        0.37</span>
<span class="token comment">#          ... </span>
<span class="token comment"># 14997    0.11</span>
<span class="token comment"># 14998    0.37</span>
<span class="token comment"># 14999     NaN</span>
<span class="token comment"># 15000     NaN</span>
<span class="token comment"># 15001    0.70</span>


<span class="token comment"># print(type(df[&quot;satisfaction_level&quot;]))</span>
<span class="token comment"># &lt;class 'pandas.core.series.Series'&gt;</span>

<span class="token comment"># 求均值</span>
<span class="token comment"># print(df.mean())</span>
<span class="token comment"># satisfaction_level         0.612839</span>
<span class="token comment"># last_evaluation           67.373732</span>
<span class="token comment"># number_project             3.802693</span>
<span class="token comment"># average_monthly_hours    201.041728</span>
<span class="token comment"># time_spend_company         3.498067</span>
<span class="token comment"># Work_accident              0.144581</span>
<span class="token comment"># left                       0.238235</span>
<span class="token comment"># promotion_last_5years      0.021264</span>

<span class="token comment"># print(type(df.mean()))</span>
<span class="token comment"># &lt;class 'pandas.core.series.Series'&gt;</span>

<span class="token comment">#求某个系列的均值</span>
<span class="token comment"># print(df[&quot;satisfaction_level&quot;].mean())</span>
<span class="token comment"># 0.6128393333333333</span>



<span class="token comment"># 中位数</span>
<span class="token comment"># print(df.median())</span>

<span class="token comment"># satisfaction_level         0.64</span>
<span class="token comment"># last_evaluation            0.72</span>
<span class="token comment"># number_project             4.00</span>
<span class="token comment"># average_monthly_hours    200.00</span>
<span class="token comment"># time_spend_company         3.00</span>
<span class="token comment"># Work_accident              0.00</span>
<span class="token comment"># left                       0.00</span>
<span class="token comment"># promotion_last_5years      0.00</span>

<span class="token comment">## 4分之一分位数</span>
<span class="token comment"># print(df[&quot;satisfaction_level&quot;].quantile(0.25))</span>
<span class="token comment"># 0.44</span>


<span class="token comment"># 众数</span>
<span class="token comment"># print(df.mode())</span>

<span class="token comment">#    satisfaction_level  last_evaluation  ...  department  salary       </span>
<span class="token comment"># 0                 0.1             0.55  ...       sales     low       </span>
<span class="token comment"># 1                 NaN              NaN  ...         NaN     NaN </span>


<span class="token comment"># 离中趋势</span>
<span class="token comment"># 标准差   标准差是方差的算术平方根</span>

<span class="token comment"># print(df.std())</span>
<span class="token comment"># satisfaction_level          0.248623</span>
<span class="token comment"># last_evaluation          8164.407524</span>
<span class="token comment"># number_project              1.232733</span>
<span class="token comment"># average_monthly_hours      49.941815</span>
<span class="token comment"># time_spend_company          1.460053</span>
<span class="token comment"># Work_accident               0.351689</span>
<span class="token comment"># left                        0.426018</span>
<span class="token comment"># promotion_last_5years       0.144267</span>


<span class="token comment"># 方差var</span>
<span class="token comment"># print(df.var())</span>
<span class="token comment"># satisfaction_level       6.181359e-02</span>
<span class="token comment"># last_evaluation          6.665755e+07</span>
<span class="token comment"># number_project           1.519630e+00</span>
<span class="token comment"># average_monthly_hours    2.494185e+03</span>
<span class="token comment"># time_spend_company       2.131754e+00</span>
<span class="token comment"># Work_accident            1.236854e-01</span>
<span class="token comment"># left                     1.814911e-01</span>
<span class="token comment"># promotion_last_5years    2.081307e-02</span>

<span class="token comment"># print(df[&quot;satisfaction_level&quot;].var())</span>
<span class="token comment"># 0.061813585758606134</span>


<span class="token comment"># 求和</span>
<span class="token comment"># print(df['satisfaction_level'].sum())</span>


<span class="token comment"># 偏态系数skew</span>
<span class="token comment"># print(df.skew())</span>

<span class="token comment"># satisfaction_level        -0.476438     # 说明satisfaction_level平均值偏小，大部分的值，大于平均值</span>
<span class="token comment"># last_evaluation          122.482652</span>
<span class="token comment"># number_project             0.337774</span>
<span class="token comment"># average_monthly_hours      0.053225</span>
<span class="token comment"># time_spend_company         1.853530</span>
<span class="token comment"># Work_accident              2.021481</span>
<span class="token comment"># left                       1.229057</span>
<span class="token comment"># promotion_last_5years      6.637677</span>



<span class="token comment"># 峰度系数kurt   </span>
<span class="token comment"># print(df.kurt())</span>

<span class="token comment"># satisfaction_level          -0.670696   # 与正态分布作比较的， 负数，说明比正太分布还平缓</span>
<span class="token comment"># last_evaluation          15001.999987</span>
<span class="token comment"># number_project              -0.495810</span>
<span class="token comment"># average_monthly_hours       -1.135016</span>
<span class="token comment"># time_spend_company           4.774353</span>
<span class="token comment"># Work_accident                2.086664</span>
<span class="token comment"># left                        -0.489485</span>
<span class="token comment"># promotion_last_5years       42.064357</span>




<span class="token comment"># 生成一个正太分布</span>
<span class="token comment"># 标准正态分布又称为u分布，是以0为均数、以1为标准差的正态分布，记为N（0，1）。</span>
<span class="token keyword">import</span> scipy<span class="token punctuation">.</span>stats <span class="token keyword">as</span> ss
<span class="token comment"># ss.norm</span>

<span class="token comment"># ss.norm.stats(moments=&quot;mvsk&quot;) # m均值 v方差  s偏态系数  k峰态系数</span>

<span class="token comment"># pdf   #输入横坐标，返回纵坐标</span>
<span class="token comment"># print(ss.norn.pdf(0.0))</span>

<span class="token comment"># ppf   #输入概率（0-1之间）</span>
<span class="token comment"># print(ss.norm.ppf(0.9))  </span>
<span class="token comment"># 累计值：从负无穷到输入值</span>


<span class="token comment"># cdf  从负无穷到输入值的累计概率   </span>
<span class="token comment"># print(ss.norm.cdf(1))   # 从负无穷到正一倍标准差的概率</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>ss<span class="token punctuation">.</span>norm<span class="token punctuation">.</span>cdf<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">-</span> ss<span class="token punctuation">.</span>norm<span class="token punctuation">.</span>cdf<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>  <span class="token comment"># 从正2倍标准差到负两倍标准差的概率</span>



</code></pre></div><h2 id="数据分类"><a href="#数据分类" class="header-anchor">#</a> 数据分类</h2> <ul><li>定类（类别）：根据事务离散/无差别属性进行的分类</li> <li>定序（顺序）：可以界定数据的大小，但不能测定差值</li> <li>定距（间隔）：可以界定数据大小的同时，可测定差值，但无绝对零点</li> <li>定比（比率）：可以界定数据大小，可测定差值，有绝对零点</li></ul> <h2 id="单属性分析"><a href="#单属性分析" class="header-anchor">#</a> 单属性分析</h2> <ul><li>异常值分析：离散异常值，连续异常值，常识异常值</li> <li>对比分析：绝对数与相对数，时间、空间、理论维度比较</li> <li>结构分析：各组成部分的分布规律</li> <li>分布分析：数据分布频率的显式分析</li></ul> <h3 id="异常值分析"><a href="#异常值分析" class="header-anchor">#</a> 异常值分析</h3> <h4 id="异常值分析与分布分析code"><a href="#异常值分析与分布分析code" class="header-anchor">#</a> 异常值分析与分布分析code</h4> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'./data/data/HR.csv'</span><span class="token punctuation">)</span>

<span class="token comment"># 异常值分析</span>
<span class="token comment"># 数据里有没有null</span>
<span class="token comment"># isnull() 方法</span>
sl_s <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'satisfaction_level'</span><span class="token punctuation">]</span>
<span class="token comment"># print(sl_s.isnull())</span>
<span class="token comment"># 0        False</span>
<span class="token comment"># 1        False</span>
<span class="token comment"># 2        False</span>
<span class="token comment"># 3        False</span>
<span class="token comment"># 4        False</span>
<span class="token comment">#          ...  </span>
<span class="token comment"># 14997    False</span>
<span class="token comment"># 14998    False</span>
<span class="token comment"># 14999     True</span>
<span class="token comment"># 15000     True</span>
<span class="token comment"># 15001    False</span>


<span class="token comment"># 查看有几条异常值</span>
<span class="token comment"># sl_s[sl_s.isnull()]</span>

<span class="token comment"># print(sl_s[sl_s.isnull()])</span>
<span class="token comment"># 14999   NaN</span>
<span class="token comment"># 15000   NaN</span>


<span class="token comment"># 查看具体某项的值</span>
<span class="token comment"># print( df[df['satisfaction_level'].isnull()]  )</span>

<span class="token comment">#        satisfaction_level  last_evaluation  ...  department  salary   </span>
<span class="token comment"># 14999                 NaN             0.52  ...     support     low   </span>
<span class="token comment"># 15000                 NaN        999999.00  ...        sale     low  </span>


<span class="token comment"># 丢弃异常数据</span>
sl_s <span class="token operator">=</span> sl_s<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># print(sl_s)</span>
<span class="token comment"># print(df) 这里对sl_s的操作，不会直接影响df</span>


<span class="token comment"># 除了丢弃数据，还有另一种方法就是填充数据</span>
<span class="token comment"># sl_s = sl_s.fillna()</span>
<span class="token comment"># 这里我选择丢弃数据吧</span>


<span class="token comment"># 平均值</span>
<span class="token comment"># print(sl_s.mean())  </span>

<span class="token comment"># 中位数median</span>
<span class="token comment"># print(sl_s.median())</span>

<span class="token comment"># 下四分位数</span>
<span class="token comment"># print(sl_s.quantile(q=0.25))</span>



<span class="token comment"># 标准差</span>
<span class="token comment"># print(sl_s.std())</span>


<span class="token comment"># 最大值</span>
<span class="token comment"># print(sl_s.max())</span>
<span class="token comment"># 最小值</span>
<span class="token comment"># print(sl_s.min())</span>



<span class="token comment"># 偏度skew</span>
<span class="token comment"># print( sl_s.skew() )</span>
<span class="token comment"># -0.47643761717258093  负数，负偏，说明均数比较小，大部分数比均数大</span>

<span class="token comment"># 峰度kurt</span>
<span class="token comment"># print( sl_s.kurt() )</span>
<span class="token comment"># -0.6706959323886252 负数，说明，相对于标准正态分布来说，这个分布比较平缓</span>



<span class="token comment"># ---------------</span>
<span class="token comment"># 引入numpy，可以获取到 satisfaction_level  的离散化的分布</span>
<span class="token comment"># print(sl_s.values)</span>
<span class="token comment"># [0.38 0.8  0.11 ... 0.11 0.37 0.7 ]</span>
res1 <span class="token operator">=</span> np<span class="token punctuation">.</span>histogram<span class="token punctuation">(</span>sl_s<span class="token punctuation">.</span>values<span class="token punctuation">,</span>bins<span class="token operator">=</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span><span class="token number">1.1</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#np.arange(起始，end，间隔多少)</span>
<span class="token comment"># print(res1)</span>
<span class="token comment"># (array([ 195, 1214,  532,  974, 1668, 2146, 1973, 2074, 2220, 2004],  </span>
<span class="token comment">#       dtype=int64), array([0. , 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1. ]))</span>
<span class="token comment"># 解读</span>
<span class="token comment"># 195  -----  0.0到0.1之间一共有195个数</span>
<span class="token comment"># 1214 -----  0.1到0.2之间一共由1214个</span>
<span class="token comment"># ......</span>

</code></pre></div><h4 id="四分位相关去异常值"><a href="#四分位相关去异常值" class="header-anchor">#</a> 四分位相关去异常值</h4> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'./data/data/HR.csv'</span><span class="token punctuation">)</span>
<span class="token comment"># print(df)</span>
<span class="token comment"># 异常值分析</span>
<span class="token comment"># 数据里有没有null</span>
<span class="token comment"># isnull() 方法</span>
le_s <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'last_evaluation'</span><span class="token punctuation">]</span>
<span class="token comment"># print(le_s)</span>

<span class="token comment"># 先判断是否有空值</span>
<span class="token comment"># print( le_s[le_s.isnull()] )</span>
<span class="token comment"># Series([], Name: last_evaluation, dtype: float64)  说明都有非空值</span>

<span class="token comment"># 均值mean</span>
<span class="token comment"># print( le_s.mean() )</span>
<span class="token comment"># 67.37373216904412    从数据表上粗略看，一般都是0-1之间的值，但这里60+感觉有点不对劲，哪里不对劲呢？</span>

<span class="token comment"># 标准差std</span>
<span class="token comment"># print(le_s.std())</span>
<span class="token comment"># 8164.407523745649</span>


<span class="token comment"># 中位数median</span>
<span class="token comment"># print(le_s.median())</span>
<span class="token comment"># 0.72</span>

<span class="token comment"># 最值</span>
<span class="token comment"># print(le_s.max())</span>
<span class="token comment"># print(le_s.min())</span>
<span class="token comment"># 999999.0</span>
<span class="token comment"># 0.36</span>


<span class="token comment"># 偏度skew    （几何上均值的位置与中间的关系？）</span>
<span class="token comment"># print( le_s.skew() )</span>
<span class="token comment"># 122.48265175204614   正偏，说明均值比大多数值都要大</span>

<span class="token comment"># 峰度kurt</span>
<span class="token comment"># print( le_s.kurt() )</span>
<span class="token comment"># 15001.999986807796   说明相对标准正太分布，该分布很陡</span>


<span class="token comment"># 查看大于某值的item</span>
<span class="token comment"># print( le_s[le_s&gt;1] )</span>
<span class="token comment"># 15000    999999.0</span>

<span class="token comment"># 去掉异常值的方法1，low的方法</span>
<span class="token comment"># 获取小于1的所有项</span>
<span class="token comment"># le_s = le_s[le_s&lt;=1]</span>
<span class="token comment"># print(le_s)</span>


<span class="token comment"># 去掉异常值的方法2，推荐</span>
<span class="token comment"># 理论</span>
<span class="token comment"># 异常值的定义：</span>
<span class="token comment"># 四分位间距=上四分位数-下四分位数</span>
<span class="token comment"># 上四分位数+1.5到3倍的间距，可以确定一个上界</span>
<span class="token comment"># 下四分位数-1.5到3倍的间距，可以确定一个下界</span>
<span class="token comment"># 上下界所确定的间距，可认为“正常值”</span>
<span class="token comment"># 上下界之外的，可认为是“异常值”</span>

<span class="token comment"># 下四分位数quantile</span>
q_low <span class="token operator">=</span> le_s<span class="token punctuation">.</span>quantile<span class="token punctuation">(</span>q<span class="token operator">=</span><span class="token number">0.25</span><span class="token punctuation">)</span>
<span class="token comment"># 上四分位</span>
q_high <span class="token operator">=</span> le_s<span class="token punctuation">.</span>quantile<span class="token punctuation">(</span>q<span class="token operator">=</span><span class="token number">0.75</span><span class="token punctuation">)</span>
<span class="token comment"># 四分位间距</span>
q_interval <span class="token operator">=</span> q_high <span class="token operator">-</span> q_low
<span class="token comment"># print(q_interval)</span>
<span class="token comment">#0.30999999999999994</span>

<span class="token comment"># 开始筛选</span>
<span class="token comment"># 设置倍数</span>
k <span class="token operator">=</span> <span class="token number">1.5</span>
le_s <span class="token operator">=</span> le_s<span class="token punctuation">[</span>le_s<span class="token operator">&lt;</span>q_high<span class="token operator">+</span>k<span class="token operator">*</span>q_interval<span class="token punctuation">]</span><span class="token punctuation">[</span>le_s<span class="token operator">&gt;</span>q_low<span class="token operator">-</span>k<span class="token operator">*</span>q_interval<span class="token punctuation">]</span>   <span class="token comment"># 同时满足两个条件</span>
<span class="token comment"># print(le_s)</span>
<span class="token comment"># len(le_s)</span>


<span class="token comment"># 直方图</span>
his <span class="token operator">=</span> np<span class="token punctuation">.</span>histogram<span class="token punctuation">(</span>le_s<span class="token punctuation">.</span>values<span class="token punctuation">,</span>bins <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span><span class="token number">1.1</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>his<span class="token punctuation">)</span>
<span class="token comment"># (array([   0,    0,    0,  179, 1390, 3396, 2234, 2062, 2752, 2988],</span>
<span class="token comment">#       dtype=int64), array([0. , 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1. ]))</span>
<span class="token comment"># 解读</span>
<span class="token comment"># 0到0.1之间0个</span>
<span class="token comment"># 0.1到0.2之间0个</span>
<span class="token comment"># 0.2到0.3之间0个</span>
<span class="token comment"># 0.3到0.4之间179个</span>
<span class="token comment"># ...</span>
</code></pre></div><h3 id="结构分析"><a href="#结构分析" class="header-anchor">#</a> 结构分析</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'./data/data/HR.csv'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span>
np_s <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'number_project'</span><span class="token punctuation">]</span>

<span class="token comment"># 静态结构分析</span>


<span class="token comment"># print(np_s.mean())</span>
<span class="token comment"># print(np_s.std())</span>
<span class="token comment"># print(np_s.median)</span>
<span class="token comment"># np_s.skew()</span>
<span class="token comment"># np_s.kurt()</span>
<span class="token comment"># 用np.histogram直方图去解释这个数据好像不是很合适</span>
<span class="token comment"># 且number_project的值都在2-7之间的整数，离散型</span>

<span class="token comment"># 可以用出现的次数做研究</span>
<span class="token comment"># print( np_s.value_counts() )</span>
<span class="token comment"># 4    4365</span>
<span class="token comment"># 3    4055</span>
<span class="token comment"># 5    2761</span>
<span class="token comment"># 2    2391</span>
<span class="token comment"># 6    1174</span>
<span class="token comment"># 7     256</span>

<span class="token comment"># 出现比例</span>
<span class="token comment"># print( np_s.value_counts(normalize = True) )</span>
<span class="token comment"># 4    0.290961</span>
<span class="token comment"># 3    0.270297</span>
<span class="token comment"># 5    0.184042</span>
<span class="token comment"># 2    0.159379</span>
<span class="token comment"># 6    0.078256</span>
<span class="token comment"># 7    0.017064</span>

<span class="token comment"># 排序</span>
<span class="token keyword">print</span><span class="token punctuation">(</span> np_s<span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span>normalize <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sort_index<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
<span class="token comment"># 2    0.159379</span>
<span class="token comment"># 3    0.270297</span>
<span class="token comment"># 4    0.290961</span>
<span class="token comment"># 5    0.184042</span>
<span class="token comment"># 6    0.078256</span>
<span class="token comment"># 7    0.017064</span>
</code></pre></div><h5 id="区间值分布"><a href="#区间值分布" class="header-anchor">#</a> 区间值分布</h5> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'./data/data/HR.csv'</span><span class="token punctuation">)</span>
amh_s <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'average_monthly_hours'</span><span class="token punctuation">]</span>


<span class="token comment"># 均值</span>
<span class="token comment"># print(amh_s.mean())</span>

<span class="token comment"># 标准差</span>
<span class="token comment"># print(amh_s.std())</span>

<span class="token comment"># 最值</span>
<span class="token comment"># print(amh_s.max())</span>
<span class="token comment"># print(amh_s.min())</span>

<span class="token comment"># 偏度</span>
<span class="token comment"># print(amh_s.skew())</span>

<span class="token comment"># 峰度</span>
<span class="token comment"># print(amh_s.kurt())</span>

<span class="token comment"># 去除异常值</span>
amh_s <span class="token operator">=</span> amh_s<span class="token punctuation">[</span>amh_s<span class="token operator">&lt;</span>amh_s<span class="token punctuation">.</span>quantile<span class="token punctuation">(</span><span class="token number">0.75</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1.5</span><span class="token operator">*</span><span class="token punctuation">(</span>amh_s<span class="token punctuation">.</span>quantile<span class="token punctuation">(</span><span class="token number">0.75</span><span class="token punctuation">)</span><span class="token operator">-</span>amh_s<span class="token punctuation">.</span>quantile<span class="token punctuation">(</span><span class="token number">0.25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span>amh_s<span class="token operator">&gt;</span>amh_s<span class="token punctuation">.</span>quantile<span class="token punctuation">(</span><span class="token number">0.25</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1.5</span><span class="token operator">*</span><span class="token punctuation">(</span>amh_s<span class="token punctuation">.</span>quantile<span class="token punctuation">(</span><span class="token number">0.75</span><span class="token punctuation">)</span><span class="token operator">-</span>amh_s<span class="token punctuation">.</span>quantile<span class="token punctuation">(</span><span class="token number">0.25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token comment"># print(amh_s)</span>

<span class="token comment"># 分布</span>
<span class="token comment"># print( np.histogram(amh_s.values,bins = 10) )   # 分10份</span>
<span class="token comment"># (array([ 367, 1240, 2736, 1722, 1628, 1712, 1906, 2240, 1127,  324],  </span>
<span class="token comment">#       dtype=int64), array([ 96. , 117.4, 138.8, 160.2, 181.6, 203. , 224.4, 245.8, 267.2,</span>
<span class="token comment">#        288.6, 310. ]))</span>

<span class="token comment"># print( np.histogram(amh_s.values,bins = np.arange(amh_s.min(),amh_s.max()+10,10)) )</span>
<span class="token comment"># (array([ 168,  171,  147,  807, 1153, 1234, 1075,  824,  818,  758,  751,</span>
<span class="token comment">#         738,  856,  824,  987, 1002, 1045,  935,  299,  193,  131,   86],</span>
<span class="token comment">#       dtype=int64), array([ 96, 106, 116, 126, 136, 146, 156, 166, 176, 186, 196, 206, 216,</span>
<span class="token comment">#        226, 236, 246, 256, 266, 276, 286, 296, 306, 316], dtype=int64))</span>



<span class="token comment"># 值次数，也可以 值区间 次数</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>  amh_s<span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span>bins<span class="token operator">=</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span>amh_s<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>amh_s<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sort_index<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">)</span>
<span class="token comment"># 未加sort_index()的结果</span>
<span class="token comment"># (146.0, 156.0]     1277</span>
<span class="token comment"># (136.0, 146.0]     1159</span>
<span class="token comment"># (256.0, 266.0]     1063</span>
<span class="token comment"># (236.0, 246.0]     1006</span>
<span class="token comment"># (156.0, 166.0]      995</span>
<span class="token comment"># (246.0, 256.0]      987</span>
<span class="token comment"># (126.0, 136.0]      886</span>
<span class="token comment"># (216.0, 226.0]      873</span>
<span class="token comment"># (266.0, 276.0]      860</span>
<span class="token comment"># (166.0, 176.0]      832</span>
<span class="token comment"># (226.0, 236.0]      814</span>
<span class="token comment"># (176.0, 186.0]      813</span>
<span class="token comment"># (186.0, 196.0]      761</span>
<span class="token comment"># (196.0, 206.0]      755</span>
<span class="token comment"># (206.0, 216.0]      731</span>
<span class="token comment"># (276.0, 286.0]      319</span>
<span class="token comment"># (95.999, 106.0]     187</span>
<span class="token comment"># (286.0, 296.0]      164</span>
<span class="token comment"># (116.0, 126.0]      162</span>
<span class="token comment"># (106.0, 116.0]      162</span>
<span class="token comment"># (296.0, 306.0]      128</span>
<span class="token comment"># (306.0, 316.0]       68</span>
</code></pre></div><h5 id="清楚异常值"><a href="#清楚异常值" class="header-anchor">#</a> 清楚异常值</h5> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'./data/data/HR.csv'</span><span class="token punctuation">)</span>
s_s <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'salary'</span><span class="token punctuation">]</span>
<span class="token comment"># print(s_s)</span>
<span class="token comment"># print(s_s.value_counts())</span>
<span class="token comment"># low       7318</span>
<span class="token comment"># medium    6446</span>
<span class="token comment"># high      1237</span>
<span class="token comment"># nme          1</span>

<span class="token comment"># 清除异常值</span>
<span class="token keyword">print</span><span class="token punctuation">(</span> s_s<span class="token punctuation">.</span>where<span class="token punctuation">(</span>s_s <span class="token operator">!=</span> <span class="token string">'nme'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>dropna<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'./data/data/HR.csv'</span><span class="token punctuation">)</span>
d_s <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'department'</span><span class="token punctuation">]</span>

<span class="token comment"># 频次</span>
<span class="token comment"># print(d_s.value_counts())</span>
<span class="token comment"># sales          4140</span>
<span class="token comment"># technical      2720</span>
<span class="token comment"># support        2230</span>
<span class="token comment"># IT             1227</span>
<span class="token comment"># product_mng     902</span>
<span class="token comment"># marketing       858</span>
<span class="token comment"># RandD           787</span>
<span class="token comment"># accounting      767</span>
<span class="token comment"># hr              739</span>
<span class="token comment"># management      630</span>
<span class="token comment"># sale              2</span>


<span class="token comment"># 频率</span>
<span class="token comment"># print(d_s.value_counts(normalize = True).sort_index())</span>
<span class="token comment"># IT             0.081789</span>
<span class="token comment"># RandD          0.052460</span>
<span class="token comment"># accounting     0.051127</span>
<span class="token comment"># hr             0.049260</span>
<span class="token comment"># management     0.041994</span>
<span class="token comment"># marketing      0.057192</span>
<span class="token comment"># product_mng    0.060125</span>
<span class="token comment"># sale           0.000133</span>
<span class="token comment"># sales          0.275963</span>
<span class="token comment"># support        0.148647</span>
<span class="token comment"># technical      0.181309</span>


<span class="token comment"># 去掉异常值</span>
d_s <span class="token operator">=</span> d_s<span class="token punctuation">.</span>where<span class="token punctuation">(</span>d_s <span class="token operator">!=</span> <span class="token string">&quot;sale&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>d_s<span class="token punctuation">.</span>value_counts<span class="token punctuation">(</span>normalize <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sort_index<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="对比分析"><a href="#对比分析" class="header-anchor">#</a> 对比分析</h3> <p>得先剔除异常值</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'./data/data/HR.csv'</span><span class="token punctuation">)</span>

<span class="token comment"># 去掉空值</span>
df <span class="token operator">=</span> df<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>how<span class="token operator">=</span><span class="token string">&quot;any&quot;</span><span class="token punctuation">)</span>
<span class="token comment"># print(df)</span>

<span class="token comment"># 多个筛选</span>
df <span class="token operator">=</span> df<span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">&quot;last_evaluation&quot;</span><span class="token punctuation">]</span><span class="token operator">&lt;=</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">&quot;salary&quot;</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">&quot;nme&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">&quot;department&quot;</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">&quot;sale&quot;</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>df<span class="token punctuation">)</span>

<span class="token comment"># 删除数据</span>
<span class="token comment"># axis表示删除行还是列，0为删除行</span>
<span class="token comment"># how   any表示这一行只要有一个异常数据就删除该行，[&quot;any&quot;,&quot;all&quot;]  all是所有的都是空值的时候就删除</span>

</code></pre></div><h4 id="自定义"><a href="#自定义" class="header-anchor">#</a> 自定义</h4> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'./data/data/HR.csv'</span><span class="token punctuation">)</span>

<span class="token comment"># 去掉空值</span>
df <span class="token operator">=</span> df<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>how<span class="token operator">=</span><span class="token string">&quot;any&quot;</span><span class="token punctuation">)</span>
<span class="token comment"># print(df)</span>

<span class="token comment"># 多个筛选</span>
df <span class="token operator">=</span> df<span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">&quot;last_evaluation&quot;</span><span class="token punctuation">]</span><span class="token operator">&lt;=</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">&quot;salary&quot;</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">&quot;nme&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span>df<span class="token punctuation">[</span><span class="token string">&quot;department&quot;</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">&quot;sale&quot;</span><span class="token punctuation">]</span>
<span class="token comment"># print(df)</span>


<span class="token comment"># 按部门分类</span>
<span class="token comment"># 分类后使用聚合操作，这里用均数</span>
<span class="token comment"># print(df.groupby(&quot;department&quot;).mean(),sep=&quot;\n&quot;)</span>
<span class="token comment">#   df = df[df[&quot;last_evaluation&quot;]&lt;=1][df[&quot;salary&quot;]!=&quot;nme&quot;][df[&quot;department&quot;]!=&quot;sale&quot;]</span>
<span class="token comment">#              satisfaction_level  last_evaluation  number_project  average_monthly_hours  time_spend_company  Work_accident      left  promotion_last_5years</span>
<span class="token comment"># department</span>
<span class="token comment"># IT                     0.618142         0.716830        3.816626             202.215974            3.468623       0.133659  0.222494               0.002445</span>
<span class="token comment"># RandD                  0.619822         0.712122        3.853875             200.800508            3.367217       0.170267  0.153748               0.034307</span>
<span class="token comment"># accounting             0.582151         0.717718        3.825293             201.162973            3.522816       0.125163  0.265971               0.018253</span>
<span class="token comment"># hr                     0.598809         0.708850        3.654939             198.684709            3.355886       0.120433  0.290934               0.020298</span>
<span class="token comment"># management             0.621349         0.724000        3.860317             201.249206            4.303175       0.163492  0.144444               0.109524</span>
<span class="token comment"># marketing              0.618601         0.715886        3.687646             199.385781            3.569930       0.160839  0.236597               0.050117</span>
<span class="token comment"># product_mng            0.619634         0.714756        3.807095             199.965632            3.475610       0.146341  0.219512               0.000000</span>
<span class="token comment"># sales                  0.614447         0.709717        3.776329             200.911353            3.534058       0.141787  0.244928               0.024155</span>
<span class="token comment"># support                0.618300         0.723109        3.803948             200.758188            3.393001       0.154778  0.248991               0.008973</span>
<span class="token comment"># technical              0.607897         0.721099        3.877941             202.497426            3.411397       0.140074  0.256250               0.010294</span>


<span class="token comment"># 切片操作</span>
res1 <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;last_evaluation&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;department&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">&quot;department&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># [:,[&quot;last_evaluation&quot;,&quot;department&quot;]]  行全部，列要[&quot;last_evaluation&quot;,&quot;department&quot;]</span>

<span class="token comment"># print(res1)</span>
<span class="token comment">#   df = df[df[&quot;last_evaluation&quot;]&lt;=1][df[&quot;salary&quot;]!=&quot;nme&quot;][df[&quot;department&quot;]!=&quot;sale&quot;]</span>
<span class="token comment">#              last_evaluation</span>
<span class="token comment"># department</span>
<span class="token comment"># IT                  0.716830</span>
<span class="token comment"># RandD               0.712122</span>
<span class="token comment"># accounting          0.717718</span>
<span class="token comment"># hr                  0.708850</span>
<span class="token comment"># management          0.724000</span>
<span class="token comment"># marketing           0.715886</span>
<span class="token comment"># product_mng         0.714756</span>
<span class="token comment"># sales               0.709717</span>
<span class="token comment"># support             0.723109</span>
<span class="token comment"># technical           0.721099</span>


<span class="token comment"># loc、iloc提取行数据</span>
<span class="token comment"># :表示所有，[]里边为先行后列  .groupby(&quot;department&quot;).mean()</span>
res2 <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;last_evaluation&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;department&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">&quot;department&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># print(res2)</span>

<span class="token comment"># 自定义</span>
res3 <span class="token operator">=</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;time_spend_company&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;department&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token string">&quot;department&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span>x<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>x<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res3<span class="token punctuation">)</span>
</code></pre></div><h4 id="python检验是否为正太分布"><a href="#python检验是否为正太分布" class="header-anchor">#</a> python检验是否为正太分布</h4> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> scipy<span class="token punctuation">.</span>stats <span class="token keyword">as</span> ss

<span class="token comment"># 随机生成一个符合标准正太分布的20个数</span>
norm_dist <span class="token operator">=</span> ss<span class="token punctuation">.</span>norm<span class="token punctuation">.</span>rvs<span class="token punctuation">(</span>size<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>norm_dist<span class="token punctuation">)</span>
a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token comment"># 如何检测是否是正太分布呢</span>
res1 <span class="token operator">=</span> ss<span class="token punctuation">.</span>normaltest<span class="token punctuation">(</span>a<span class="token punctuation">)</span>   
<span class="token keyword">print</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span>
<span class="token comment"># NormaltestResult(statistic=0.9547603432197074, pvalue=0.6204066234691221)</span>
<span class="token comment"># 如果显著性水平是0.05的话 pvalue  p值大于0.05则表示符合正太分布</span></code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/Python/basicKnowledge/base.html" class="prev">
        数据分析
      </a></span> <span class="next"><a href="/blog/Python/basicKnowledge/z.html">
        z检验
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.09e88087.js" defer></script><script src="/blog/assets/js/2.5d6d69d5.js" defer></script><script src="/blog/assets/js/4.aecd194a.js" defer></script>
  </body>
</html>
